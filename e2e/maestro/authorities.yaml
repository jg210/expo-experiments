appId: uk.me.jeremygreen.expoexperiments
jsEngine: graaljs
---
- launchApp
# The API and iOS simulators can be very slow, especially if running tests
# concurrently, so sometimes need wait a long time here. Longer than whatever
# the default timeout is with assertVisible.
- extendedWaitUntil:
    visible: "Barnet"
    timeout: 120000

# workaround for https://github.com/jg210/expo-experiments/pull/7#issuecomment-2732749198 which means can't do this on iOS:
#
# - assertVisible:
#     id: "fingerprintExpo"
#     text: "[0-9a-f]{8}"
- assertVisible:
    id: "fingerprintExpo"
- assertVisible:
    id: "fingerprintTurbo"
- copyTextFrom:
    id: "fingerprintExpo"
- assertTrue: ${maestro.copiedText.match(/[0-9a-f]{8}/)}
- evalScript: ${output.fingerPrintExpo = maestro.copiedText}
- copyTextFrom:
    id: "fingerprintTurbo"
- assertTrue: ${maestro.copiedText.match(/[0-9a-f]{8}/)}
- evalScript: ${output.fingerPrintTurbo = maestro.copiedText}
# One fingerprint is SHA256, the other SHA512, so they can never be the same.
- assertTrue: ${output.fingerPrintExpo != output.fingerPrintTurbo}
